
## Como fazer uso do sistema

Para utilizar o sistema é necessário primeiramente fazer o download da versão mais recente, disponível na seção anterior.

Após realizar o download da ferramenta, extraia os arquivos em algum diretório de sua máquina e em seguida execute o arquivo **wpanda.exe** presente dentro da pasta.

A aplicação deverá abrir sem problemas

<p align="center">
  <img src="static/assets/tutorial/wired_panda.png" width="600" height="400" alt="Usuário criando atalho"/>
</p>

<br>

-----------------------

### Criando um atalho

Esta parte é opcional, mas poderá ajudar aqueles que precisarem.

<details>

<br>
É possível também criar um atalho para o executável, para isto, pressione com o botão direito do <i>mouse</i> o executável <b>wpanda.exe</b> e selecione a opção 'Create Shortcut' ou 'Criar atalho'. 

<p align="center">
  <img src="static/assets/tutorial/create_shortcut.png" alt="Usuário criando atalho"/>
</p>

Copie o atalho para a área de trabalho.

</details>

<br>

-----------------------

### Criando seu primeiro projeto

Com a aplicação aberta, vá no canto esquerdo nas opções de componentes, você verá a opção **Remote** dentro da página _In/Out_, arraste o componente para a tela:

<p align="center">
  <img src="static/assets/tutorial/create_remote_component.gif" alt="Arrastando componente para a tela"/>
</p>

Agora adicione elementos de entrada e saída, veja que existem uma porção deles, para manter simples, iremos colocar uma chave e um _led_.

<p align="center">
  <img src="static/assets/tutorial/create_io_components.gif" alt="Arrastando componente para a tela"/>
</p>

Agora, basta pressionar **2x** o componente remoto para abrir suas configurações (também é possível abrir pressionando configurações no canto inferior esquerdo com ele selecionado, ou pressionando com o botão direito do _mouse_). Em seguida selecione o domínio o qual você deseja conectar.

* O domínio **UNIFESP VPN** deve ser utilizado caso o usuário esteja **dentro** da rede Unifesp.
* Já o domínio **UNIFESP EXT** deve ser utilizado caso o usuário esteja **fora** da rede Unifesp.

<p align="center">
  <img src="static/assets/tutorial/open_auth_config.gif" alt="Pressionando duas vezes o componente e em seguida selecionando a opção de domínio: UNIFESP EXT"/>
</p>

É possível utilizar o usuário e senha da **Intranet** para se conectar no sistema, sendo assim, não é necessário fazer nenhum cadastro anterior.

Diferentes tipos de dispositivos podem ser selecionados, assim como diferentes tipos de métodos de utilização, contudo, este domínio atualmente não possui outras opções além da padrão **VirtualHere**.

<p align="center">
  <img src="static/assets/tutorial/login_step.gif" alt="Autenticando-se ao sistema"/>
</p>

É possível que você enfrente um fila para utilizar o sistema, caso não tenha vagas disponíveis. Neste caso aparecerá uma mensagem similar a apresentada abaixo:

<p align="center">
  <img src="static/assets/tutorial/waiting_list.png" alt="Imagem mostrando a fila de espera do sistema"/>
</p>

Caso escolha entrar na fila, entre nas configurações novamente e poderá ver sua posição atual juntamente com um tempo estimado de espera. Caso alguém saia antes do esperado, este tempo irá diminuir.

<p align="center">
  <img src="static/assets/tutorial/waiting_list.gif" alt="Imagem mostrando a fila de espera do sistema"/>
</p>

Se já estiver conectado ao sistema, a tela a ser mostrada ao entrar em configurações será outra, esta por sua vez terá agora as opções para fazer a pinagem, conectar-se ao método desejado, ou desconectar.

Neste exemplo estamos utilizando um dispositivo com método de conexão _VirtualHere_ (padrão), então no momento que esta tela aparecer, o _VirtualHere_ também será aberto.

<p align="center">
  <img src="static/assets/tutorial/open_config_window.gif" alt="Imagem mostrando a janela de configurações do dispositivo sendo aberta juntamente com a janela do VirtualHere"/>
</p>

**OBS:** Sinta-se livre para fechar a janela do _VirtualHere_, este continuará aberto em segundo plano.

Para se conectar ao método _VirtualHere_ é necessário copiar o **token** presente embaixo do método na janela de configurações. Para facilitar existe um botão no canto direito do **token** para copiar o conteúdo para a área de transferência (<kbd>Ctrl</kbd> + <kbd>C</kbd>).

Perceba que em cima estará presente o nome do dispositivo, este nome é exatamente igual o presente no aplicativo _VirtualHere_, então certifique-se de estar se conectando a placa correta.

<p align="center">
  <img src="static/assets/tutorial/connecting_virtual_here.gif" alt="Imagem mostrando como é feita a conexão do dispositivo USB através do VirtualHere"/>
</p>

O _VirtualHere_ irá solicitar a instalação de alguns _drivers_ no sistema pela primeira vez. É importante que quando ele o faça, você dê permissão para que ele instale os _drivers_ necessários.

Caso a janela do _VirtualHere_ desapareça, ela poderá ser encontrada no canto inferior direito, como na figura abaixo:

<p align="center">
  <img src="static/assets/tutorial/virtual_here_hidden.png" alt="Imagem mostrando como abrir a janela do VirtualHere, caso esta desapareça"/>
</p>

Neste momento o kit de desenvolvimento **DE2-115** já está conectado em sua máquina, então iremos agora abrir a aplicação **Quartus** para criar nosso primeiro projeto.

É recomendado que se utilize a versão **v20.1.1** (porém não é necessário), visto que esta possui uma implementação mais recente da funcionalidade **Programmer** necessária para subir o _design_ do circuito para a placa, nesta nova versão é possível acompanhar o andamento da programação.

<p align="center">
  <img src="static/assets/tutorial/quartus_version.png" alt="Imagem mostrando como abrir a janela do VirtualHere, caso esta desapareça"/>
</p>

Siga as instruções abaixo para criar o projeto.

<details>

<div id="carouselPartI" class="carousel slide" data-ride="carousel" data-wrap="false">
  <ol class="carousel-indicators">
    <li data-target="#carouselPartI" data-slide-to="0" class="active"></li>
    <li data-target="#carouselPartI" data-slide-to="1"></li>
    <li data-target="#carouselPartI" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_1.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_2.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Pressione <b>Next ></b></h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_3.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Dê um nome de projeto e um caminho</h5>
            <p style="color: black">Você precisa inserir aqui o caminho aonde deseja salvar seu projeto e o nome dele (geralmente é igual a pasta de destino)</p>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_4.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Pressione <b>Next ></b></h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_5.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Pressione <b>Next ></b></h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_6.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Selecione o dispositivo que estás usando</h5>
            <p style="color: black">Para o DE2-115, selecione a opção <b>EP4CE115F29C7</b></p>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_7.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Pressione <b>Next ></b></h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_8.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Pressione <b>Finish</b></h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_9.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Agora crie um novo arquivo</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%; height:" src="static/assets/tutorial/quartus/new_project_10.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        </div>
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselPartI" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselPartI" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

</details>

<br>

Depois de criar o novo arquivo **Verilog HDL**, insira este código:

<code>
    module FirstProject (input in, output out);
    assign out = in;
    endmodule
</code>


**OBS:** O nome do módulo deve ser igual o nome do projeto para facilitar o processo.

Este código é bastante simples e basicamente é responsável por fazer o pino da saída copiar o valor do pino da entrada. Tendo a tabela verdade igual a:

<p align="center">
  <img src="static/assets/tutorial/truth_table.png" alt="Tabela verdade mostrando que os valores da entrada serão iguais aos valores da saída"/>
</p>

<details>

<div id="carouselPartII" class="carousel slide" data-ride="carousel" data-wrap="false">
  <ol class="carousel-indicators">
    <li data-target="#carouselPartII" data-slide-to="0" class="active"></li>
    <li data-target="#carouselPartII" data-slide-to="1"></li>
    <li data-target="#carouselPartII" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_11.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>O resultado deve ser similar a este</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_12.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Agora salve o arquivo</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_13.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Tenha certeza de salvar o arquivo com o nome do projeto e dentro da pasta do projeto</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_14.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Compile o projeto</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_15.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>A compilação deverá ser bem sucedida</h5>
            <p style="color: black">Se não for, verifique o código</p>
        </div>
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselPartII" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselPartII" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

</details>

<br>

Agora, volte para o **WiredPanda**, afinal devemos selecionar os pinos que vamos estar utilizando. Para este exemplo será um pino de entrada e um pino de saída.

Para configurar basta acessar o menu de configurações novamente e ir para a página **IO**.

<p align="center">
  <img src="static/assets/tutorial/pin_section_config.png" alt="Imagem mostrando como trocar para a página IO"/>
</p>

Nesta página é possível adicionar e remover pinos nesta lista, para assim fazê-lo utilize a opção <kbd>+</kbd>.

<p align="center">
  <img src="static/assets/tutorial/add_pin.png" alt="Imagem mostrando a opção adicionar"/>
</p>

Após adicionar um nova lacuna, pressione duas vezes com o botão esquerdo do mouse em uma célula para editar seu valor.

<p align="center">
  <img src="static/assets/tutorial/adding_pins.gif" alt="Imagem mostrando como editar as células"/>
</p>

**OBS:** É necessário preencher todas as células criadas.

Para remover uma linha criada indevidamente, selecione a linha e abra o menu de opções - ao lado da opção <kbd>+</kbd> e selecione a opção <kbd>-</kbd>.

<p align="center">
  <img src="static/assets/tutorial/remove_pins.png" alt="Imagem mostrando a opção de remover uma linha"/>
</p>

Após terminar de planejar os pinos, aplique as alterações.

<p align="center">
  <img src="static/assets/tutorial/pins.png" alt="Imagem mostrando como ficou o planejamento dos pinos"/>
</p>

Perceba que ao aplicar as alterações o componente remoto irá modificar, aparecendo agora as entradas e saídas aplicadas.

<p align="center">
  <img src="static/assets/tutorial/applying_pins.gif" alt="Pinos aparecendo no componente"/>
</p>

**OBS:** É possível avaliar qual pino é a entrada (ou saída) do componente apenas deixando o _mouse_ sobre o pino.

Por fim, ligue os componentes entre sí. Lembre-se que as entradas do componente remoto sempre estará na parte de baixo, e as saídas na parte de cima.

Para ligar, pressione um pino e depois o outro logo em seguida.

<p align="center">
  <img src="static/assets/tutorial/wire_it_up.gif" alt="Ligação dos componentes sendo realizada"/>
</p>

Agora voltaremos para nosso projeto no **Quartus**.

Durante os próximos passos, seja paciente, na hora de selecionar o **hardware** é possível que o **Quartus** fique irresponsível por alguns segundos.

<details>

<div id="carouselPartIII" class="carousel slide" data-ride="carousel" data-wrap="false">
  <ol class="carousel-indicators">
    <li data-target="#carouselPartIII" data-slide-to="0" class="active"></li>
    <li data-target="#carouselPartIII" data-slide-to="1"></li>
    <li data-target="#carouselPartIII" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_16.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Vá na opção '<b>Assignments/Pin Planner</b>'</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_17.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Nesta tela você deverá copiar a pinagem realizada no <b>WiredPanda</b> anteriormente</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_18.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Atenção: pinos de entrada deverão ser pinados como pinos de entrada no <b>Quartus</b> também. <b>NÃO INVERTER</b></h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_19.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
            <h5>Após finalizar e fechar o '<b>Pin Planner</b>', perceba que será necessário compilar mais uma vez</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_20.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_21.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        <h5>Ao término da compilação, vá em '<b>Tools/Programmer</b>'</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_22.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        <h5>Caso esteja escrito '<b>No Hardware</b>', pressione <b>Hardware Setup...</b></h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_23.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        <h5>Selecione a opção '<b>USB-Blaster</b>'</h5>
        <p style="color: black">Se a opção 'USB-Blaster' não aparecer, certifique que está conectado no '<b>VirtualHere</b>'</p>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_24.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        <h5>Certifique-se que foi selecionado</h5>
        </div>
    </div>
    <div class="carousel-item">
      <img class="d-block" style="padding-left: 20%; width: 80%;" src="static/assets/tutorial/quartus/new_project_25.png" alt="...">
        <div class="carousel-caption d-none d-md-block">
        <h5>Ao fechar a janela de configuração de hardware, verifique novamente</h5>
        </div>
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselPartIII" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselPartIII" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

</details>

<br>

Devemos então pressionar a opção **Start**. Contudo, como dito anteriormente, se estivermos utilizando uma versão mais nova do **Quartus** iremos conseguir ver a barra de progresso ir aumentando gradativamente, caso estejamos usando uma versão mais antiga, não será possível, contudo apenas seja paciente.

A latência influencia diretamente na velocidade de programação, sendo a latência máxima recomendada pelo desenvolvedor do **VirtualHere** de **20ms**, porém o sistema funciona relativamente bem até **40ms**, desde que a conexão seja **estável**.

<p align="center">
  <img src="static/assets/tutorial/programming.gif" alt="Programação remota iniciada"/>
</p>

Ao finalizar a programação volte para o **WiredPanda**, neste momento você já estará pronto para testar a sua solução programada no **Quartus**. Para interagir com **switches** e **botões**, basta pressionar com o botão esquerdo sobre eles. No canto inferior esquerdo, é possível (quando selecionados os elementos) atribuir uma **hotkey** para operar os componentes, ficando mais fácil de interagir com eles com agilidade.

<p align="center">
  <img src="static/assets/tutorial/final_results.gif" alt="São mostrados os resultados finais, quando a chave no WiredPanda é ligada, o Led acende, quando é desligada, ele apaga."/>
</p>

Assim como mostrada na tabela verdade, enquanto a chave estiver desligada o led permanece desligado, quando a chave é ligada, o estado do led também muda para ligado.

------------------

Se você chegou até este ponto, por favor responda a pesquisa de satisfação e usabilidade deste sistema:

<p align="center">
    <a href="http://xyz.com/hello">
      <img src="https://www.gstatic.com/images/branding/product/1x/hh_forms_64dp.png" srcset="https://www.gstatic.com/images/branding/product/1x/hh_forms_64dp.png, https://www.gstatic.com/images/branding/product/2x/hh_forms_64dp.png 2x">
      <br>
      Google Forms Survey
    </a>
</p>
